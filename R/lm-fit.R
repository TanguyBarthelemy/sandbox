df <- data.frame(
    y = c(
        1.51156139, -0.63653132, 0.37782776, 3.03792318, 1.53646523, -2.37727874, 0.37183065, -1.53917553,
        1.10926675, -0.37786333, 2.43973603, -0.35432394, 2.19296613, 0.49845532, 1.25005260, 0.84360691,
        0.29565993, -0.54081334, 0.83612836, -1.42526769, 0.10204789, 1.14292898, -3.02942081, -1.37549764,
        -2.00118016, -4.24441674, 1.17168144, 2.64007761, 1.98550114, -0.58941683, -4.57559611, -0.82610544,
        -0.02768220, 0.78186399, -0.88314153, -4.17076452, 0.93373070, -0.08517734, -4.47546619, -1.65509103,
        -0.39403030, 0.01203300, -4.82762639, -0.72658380, -2.35886866, -2.03762707, 0.90115123, 1.55999194,
        3.07994058, 1.78871462
    ),
    x = c(
        0.55209240, -0.12599316, 0.42095384, 1.40315446, 0.46076858, -0.73963576, 0.20407468, -0.95519361,
        0.03897129, -0.17523593, 0.97970095, -0.03742559, 1.00355263, 0.34816207, 0.76306225, 0.45152356,
        0.53880068, -0.28104525, -0.12885659, -0.87107631, -0.11649899, 0.37249631, -1.28966997, -0.74676145,
        -0.55182759, -1.94603608, 1.00868008, 1.26333069, 1.18509599, -0.61972416, -2.30914920, -0.39347576,
        0.20076910, 0.25690215, -0.20200148, -2.03547588, 0.54190626, 0.17692491, -2.14876688, -0.76898087,
        -0.12689705, -0.18689898, -2.31391121, -0.39751171, -1.01082109, -0.96439902, 0.60172286, 0.83433953,
        1.30942776, 1.10605530
    ),
    weight = c(
        2.117337e-34, 2.117337e-34, 4.934135e-31, 2.679495e-24, 2.679495e-24, 6.244160e-21, 1.455107e-17,
        1.455107e-17, 3.390908e-14, 3.390908e-14, 7.902000e-11, 7.902000e-11, 4.289362e-04, 4.289362e-04,
        5.000000e-01, 5.000000e-01, 5.000000e-01, 5.000000e-01, 9.995711e-01, 9.999998e-01, 1.000000e+00,
        1.000000e+00, 1.000000e+00, 1.000000e+00, 1.000000e+00, 1.000000e+00, 1.000000e+00, 1.000000e+00,
        1.000000e+00, 9.999998e-01, 9.995711e-01, 9.995711e-01, 9.995711e-01, 9.995711e-01, 5.000000e-01,
        5.000000e-01, 4.289362e-04, 4.289362e-04, 4.289362e-04, 4.289362e-04, 4.289362e-04, 1.841442e-07,
        1.841442e-07, 3.397282e-14, 0.000000e+00, 0.000000e+00, 0.000000e+00, 0.000000e+00, 0.000000e+00,
        0.000000e+00
    )
)

# Fit model
lm1 <- lm(y ~ x, data = df)
lm2 <- lm(y ~ x, data = df, weights = df$weight)

# Compare maximum residual
resid1 <- max(resid(lm1))
resid1
#> [1] 1.14046
resid2 <- max(resid(lm2))
resid2
#> [1] 36.84939

stopifnot(identical(resid1, resid2))
#> [1] FALSE

# Compare minimum difference between predicted and fitted values
diff1 <- min(predict(lm1) - fitted(lm1))
diff1
#> [1] -2.442491e-15
diff2 <- min(predict(lm2) - fitted(lm2))
diff2
#> [1] -35.14664

stopifnot(identical(diff1, diff2))
#> [1] FALSE
